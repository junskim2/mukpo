<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="store">
	<!-- 사장님 로그인 기능 구현 -->
	<select id="selectBossLogin" resultType="bossVO">
		SELECT * FROM boss WHERE
		b_id = #{bId} AND b_pw = #{bPw}
	</select>
	<!-- 로그인한 사장님의 매장목록 가져오는 기능 구현 -->
	<select id="selectStoreList" resultType="storeVO" parameterType="bossVO">
		SELECT * FROM store WHERE b_id = #{bId}
	</select>

	<!-- 사용자 매장검색 -->
	<select id="selectUserStore" resultType="storeVO" parameterType="storeVO">
		SELECT *
		FROM store
		WHERE s_mp IN ('${sMp}')
	</select>

	<!-- 사장님 정보 가져오는 기능 구현 -->
	<select id="selectBossSearch" resultType="bossVO">
		SELECT * FROM boss
		WHERE
		b_id = #{bId}
	</select>

	<!-- 매장 정보 등록 기능 구현 -->
	<insert id="insertStoreInfo" parameterType="storeVO">
		INSERT INTO store
		VALUES(#{rCid,jdbcType=VARCHAR},#{bId,jdbcType=VARCHAR},#{sPw,jdbcType=VARCHAR},#{sUrl,jdbcType=VARCHAR},#{sName,jdbcType=VARCHAR},#{sTel,jdbcType=VARCHAR},#{sZipcode,jdbcType=VARCHAR},#{sAddress,jdbcType=VARCHAR},
		#{sSido,jdbcType=VARCHAR},#{sSigungu,jdbcType=VARCHAR},#{sMp,jdbcType=VARCHAR},#{sCate,jdbcType=VARCHAR},#{sOpentime,jdbcType=VARCHAR},#{sClosetime,jdbcType=VARCHAR},#{sClose,jdbcType=VARCHAR},#{sYn,jdbcType=VARCHAR},#{sLatitude,jdbcType=DOUBLE},#{sLongitude,jdbcType=DOUBLE},#{sDetail,jdbcType=VARCHAR})
	</insert>
	
	<!-- 테이블 정보 등록 기능 구현 -->
	<insert id="insertTableSet" parameterType="tSetVO">
		INSERT INTO tableset
		VALUES(#{rCid,jdbcType=VARCHAR},#{tCnt},#{tMax})
	</insert>
	
	<!-- 혼잡도 등록 기능 구현 -->
	<insert id="insertCongestionset" parameterType="conVO">
		INSERT INTO congestionset
		VALUES(#{csId},#{rCid},#{csCongestion},#{csCnt},#{csTime},#{csYn})
	</insert>

</mapper>